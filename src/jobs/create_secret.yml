description: >
  Sample description
# What will this job do?

executor: default

parameters:
  app_registration_id:
    type: string
    description: "Application registration client id"
  resource_group_name:
    type: string
    description: "Resource group where the key vault resides"
  key_vault_name:
    type: string
    description: "Unique name of the key vault where the secret will be stored"
  key_name:
    type: string
    description: "Unique name of the key which will house the secret as a value"
  azure-tenant:
    type: string
    description: "Unique azure tenant id"
  azure-service-principle:
    type: string
    description: "Azure service principle client id used to perform az login"
  azure-service-principle-password:
    type: string
    description: "Azure service principle password used to perform az login"
  subscription:
    default: Sandbox
    type: string
    description: "Subscription to which the keyvault resides"
steps:
  - create_secret:
      app_registration_id: <<parameters.app_registration_id>>
      resource_group_name: <<parameters.resource_group_name>>
      key_vault_name: <<parameters.key_vault_name>>
      key_name: <<parameters.key_name>>
      azure-tenant: <<parameters.azure-tenant>>
      azure-service-principle: <<parameters.azure-service-principle>>
      azure-service-principle-password: <<parameters.azure-service-principle-password>>
      subscription: <<parameters.subscription>>
