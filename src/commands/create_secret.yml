description: >
  This command will capture the incoming variables, clone the git repo, and execute the run
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  app_registration_id:
    type: string
    description: "Application registration client id"
  resource_group_name:
    type: string
    description: "Resource group where the key vault resides"
  key_vault_name:
    type: string
    description: "Unique name of the key vault where the secret will be stored"
  key_name:
    type: string
    description: "Unique name of the key which will house the secret as a value"

steps:
  - run:
      environment:
        PARAM_APP_REGISTRATION_ID: <<parameters.app_registration_id>>
        PARAM_RESOURCE_GROUP_NAME: <<parameters.resource_group_name>>
        PARAM_KEY_VAULT_NAME: <<parameters.key_vault_name>>
        PARAM_KEY_NAME: <<parameters.key_name>>
      name: Generate secret
      command: <<include(scripts/apply.sh)>>
